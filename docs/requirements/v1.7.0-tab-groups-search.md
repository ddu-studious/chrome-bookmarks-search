# v1.7.0 éœ€æ±‚æ–‡æ¡£ - æ ‡ç­¾é¡µåˆ†ç»„æœç´¢

**ç‰ˆæœ¬**: v1.7.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-24  
**çŠ¶æ€**: å¾…å¼€å‘  
**è°ƒç ”æ–‡æ¡£**: [tab-groups-api-research.md](../research/tab-groups-api-research.md)

---

## éœ€æ±‚èƒŒæ™¯

Chrome ä» 2023 å¹´åº•é»˜è®¤å¯ç”¨æ ‡ç­¾é¡µåˆ†ç»„ä¿å­˜ï¼ˆSaved Tab Groupsï¼‰åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥å°†æ ‡ç­¾é¡µå½’å…¥å‘½ååˆ†ç»„ï¼Œä¿å­˜åå…³é—­ã€‚ä½†å…³é—­åçš„åˆ†ç»„æ— æ³•é€šè¿‡å½“å‰æ‰©å±•æœç´¢åˆ°ã€‚

### Chrome åŸç”Ÿèƒ½åŠ›åˆ†æ

**Chrome æ ‡ç­¾é¡µåˆ†ç»„ç®¡ç†ç°çŠ¶ï¼š**

| åŠŸèƒ½ | æ”¯æŒæƒ…å†µ |
|------|---------|
| åˆ›å»º/å‘½å/ç€è‰²åˆ†ç»„ | âœ… æ”¯æŒ |
| ä¿å­˜åˆ†ç»„å¹¶å…³é—­ | âœ… æ”¯æŒ |
| æ‰‹åŠ¨é‡æ–°æ‰“å¼€ saved group | âœ… æ”¯æŒï¼ˆç‚¹å‡»ä¹¦ç­¾æ å›¾æ ‡ï¼‰ |
| æœç´¢åˆ†ç»„åç§° | âŒ ä¸æ”¯æŒ |
| æœç´¢åˆ†ç»„å†…æ ‡ç­¾é¡µå†…å®¹ | âŒ ä¸æ”¯æŒ |
| æ‰¹é‡ç®¡ç†åˆ†ç»„ | âŒ ä¸æ”¯æŒ |
| æŸ¥çœ‹åˆ†ç»„å†…æ ‡ç­¾é¡µè€Œä¸æ‰“å¼€ | âŒ ä¸æ”¯æŒ |

**Chrome Extension API èƒ½åŠ›ï¼š**

| API | èƒ½åŠ› | é™åˆ¶ |
|-----|------|------|
| `chrome.tabGroups.query()` | æŸ¥è¯¢å½“å‰æ‰“å¼€çš„åˆ†ç»„ | æ— æ³•æŸ¥è¯¢å·²ä¿å­˜ä½†å…³é—­çš„åˆ†ç»„ |
| `chrome.tabGroups.get(id)` | è·å–æŒ‡å®šåˆ†ç»„è¯¦æƒ… | åˆ†ç»„å…³é—­å ID å¤±æ•ˆ |
| `chrome.tabs.query({groupId})` | è·å–åˆ†ç»„å†…æ ‡ç­¾é¡µ | ä»…é™æ‰“å¼€çš„åˆ†ç»„ |
| `chrome.tabGroups.onCreated/onUpdated/onRemoved` | ç›‘å¬åˆ†ç»„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ | æ— æ³•ç›‘å¬ saved group çš„æ‰“å¼€ |
| `chrome.tabs.group({tabIds})` | åˆ›å»ºåˆ†ç»„å¹¶å½’å…¥æ ‡ç­¾é¡µ | å¯ç”¨äºæ¢å¤åˆ†ç»„ |
| `chrome.tabGroups.update(id, props)` | ä¿®æ”¹åˆ†ç»„å±æ€§ | Chrome 125+ å·²ä¿®å¤å¯¹ saved group çš„é™åˆ¶ |

**å˜é€šç­–ç•¥ï¼š** é€šè¿‡äº‹ä»¶ç›‘å¬ + æœ¬åœ°å¿«ç…§ï¼Œåœ¨åˆ†ç»„æ‰“å¼€æ—¶æŒç»­è®°å½•å…¶å†…å®¹ï¼Œåˆ†ç»„å…³é—­åä»æœ¬åœ°å­˜å‚¨è¯»å–å†å²æ•°æ®ã€‚ï¼ˆè¯¦è§è°ƒç ”æ–‡æ¡£ç¬¬ 5 èŠ‚ï¼‰

---

## éœ€æ±‚ç›®æ ‡

1. **æœç´¢åˆ†ç»„**ï¼šæ”¯æŒæŒ‰åˆ†ç»„åç§°æœç´¢æ‰€æœ‰åˆ†ç»„ï¼ˆåŒ…æ‹¬æ‰“å¼€çš„å’Œå·²ä¿å­˜å…³é—­çš„ï¼‰
2. **ç©¿é€æœç´¢**ï¼šæ”¯æŒæœç´¢åˆ†ç»„å†…æ ‡ç­¾é¡µçš„æ ‡é¢˜å’Œ URL
3. **æ ‘çŠ¶å±•ç¤º**ï¼šä»¥åˆ†ç»„ä¸ºç»´åº¦ã€æ ‘çŠ¶ç»“æ„å±•ç¤ºåˆ†ç»„åŠå…¶æ ‡ç­¾é¡µ
4. **å¿«é€Ÿæ“ä½œ**ï¼šä¸€é”®æ‰“å¼€å·²ä¿å­˜åˆ†ç»„ã€åˆ‡æ¢åˆ°æ‰“å¼€åˆ†ç»„ã€å…³é—­åˆ†ç»„
5. **åˆ†ç»„å¿«ç…§**ï¼šåå°æŒç»­è®°å½•åˆ†ç»„æ•°æ®ï¼Œç¡®ä¿å…³é—­åä»å¯æœç´¢

---

## åŠŸèƒ½éœ€æ±‚

### P0 - æ ¸å¿ƒåŠŸèƒ½

#### F1: Background åˆ†ç»„å¿«ç…§æœåŠ¡

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | åœ¨ background.js ä¸­ç›‘å¬åˆ†ç»„äº‹ä»¶ï¼Œå°†åˆ†ç»„åŠå…¶æ ‡ç­¾é¡µä¿¡æ¯æŒä¹…åŒ–åˆ° chrome.storage.local |
| **è§¦å‘æ—¶æœº** | åˆ†ç»„åˆ›å»ºã€æ›´æ–°ã€ç§»é™¤äº‹ä»¶ + æ¯ 5 åˆ†é’Ÿå®šæœŸå…¨é‡åŒæ­¥ |
| **å­˜å‚¨ç»“æ„** | ä»¥ `title_color` ä¸ºç¨³å®š key çš„ Map |

**å¿«ç…§æ•°æ®ç»“æ„ï¼š**

```javascript
{
  "tabGroupSnapshots": {
    "langchain-1.2_red": {
      stableKey: "langchain-1.2_red",
      title: "langchain-1.2",
      color: "red",
      tabs: [
        { url: "https://docs.langchain.com/", title: "LangChain Docs", favIconUrl: "..." },
        { url: "https://github.com/langchain-ai/langchain", title: "LangChain GitHub", favIconUrl: "..." }
      ],
      isOpen: true,
      lastSeen: 1708761600000,    // æœ€åä¸€æ¬¡è¢«æ£€æµ‹åˆ°æ‰“å¼€çŠ¶æ€
      closedAt: null,             // å…³é—­æ—¶é—´ï¼ˆnull è¡¨ç¤ºå½“å‰æ‰“å¼€ï¼‰
      createdAt: 1708674000000    // é¦–æ¬¡å¿«ç…§æ—¶é—´
    }
  }
}
```

**äº‹ä»¶å¤„ç†é€»è¾‘ï¼š**

| äº‹ä»¶ | å¤„ç† |
|------|------|
| `onCreated` | åˆ›å»ºå¿«ç…§ï¼Œ`isOpen=true`ï¼Œè·å–æ ‡ç­¾é¡µåˆ—è¡¨ |
| `onUpdated` | æ›´æ–°å¿«ç…§ï¼ˆæ ‡é¢˜/é¢œè‰²å˜åŒ–æ—¶è¿ç§» stableKeyï¼‰ |
| `onRemoved` | æ ‡è®° `isOpen=false`ï¼Œè®°å½• `closedAt`ï¼Œ**ä¸åˆ é™¤æ•°æ®** |
| å®šæ—¶åŒæ­¥ | å…¨é‡æ‰«ææ‰€æœ‰æ‰“å¼€çš„åˆ†ç»„ï¼Œæ›´æ–°æ ‡ç­¾é¡µåˆ—è¡¨å’ŒçŠ¶æ€ |

**stableKey è¿ç§»é€»è¾‘ï¼š**

å½“ç”¨æˆ·é‡å‘½ååˆ†ç»„æˆ–æ”¹é¢œè‰²æ—¶ï¼Œ`onUpdated` ä¼šè§¦å‘ã€‚æ­¤æ—¶éœ€è¦ï¼š
1. è®¡ç®—æ–°çš„ `stableKey`
2. å°†æ—§ key çš„æ•°æ®è¿ç§»åˆ°æ–° key
3. åˆ é™¤æ—§ key

#### F2: æ–°å¢ "åˆ†ç»„" æ¨¡å¼ TAB

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | åœ¨æ¨¡å¼é€‰æ‹©æ ä¸­æ–°å¢ç¬¬ 3 ä¸ª TABï¼š"åˆ†ç»„"ï¼ˆä½äº"æ ‡ç­¾é¡µ"å’Œ"å†å²"ä¹‹é—´ï¼‰ |
| **æ¨¡å¼æ ‡è¯†** | `data-mode="groups"` |
| **å¿«æ·é”®** | æ”¯æŒ â†â†’ é”®åˆ‡æ¢ï¼Œé¡ºåºä¸ºï¼šä¹¦ç­¾ â†’ æ ‡ç­¾é¡µ â†’ åˆ†ç»„ â†’ å†å² â†’ ä¸‹è½½ |

**æ¨¡å¼é€‰æ‹©æ å˜æ›´ï¼š**

```
å˜æ›´å‰ï¼š[ä¹¦ç­¾] [æ ‡ç­¾é¡µ] [å†å²] [ä¸‹è½½]
å˜æ›´åï¼š[ä¹¦ç­¾] [æ ‡ç­¾é¡µ] [åˆ†ç»„] [å†å²] [ä¸‹è½½]
```

#### F3: åˆ†ç»„æ•°æ®åŠ è½½

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | åˆ‡æ¢åˆ°"åˆ†ç»„"æ¨¡å¼æ—¶ï¼Œåˆå¹¶æ‰“å¼€çš„åˆ†ç»„ï¼ˆå®æ—¶ï¼‰å’Œå·²ä¿å­˜çš„åˆ†ç»„ï¼ˆæœ¬åœ°å¿«ç…§ï¼‰ |
| **æ•°æ®åˆå¹¶** | æ‰“å¼€çš„åˆ†ç»„ä½¿ç”¨å®æ—¶æ•°æ®ï¼ˆä¼˜å…ˆï¼‰ï¼Œè¡¥å……æœ¬åœ°å­˜å‚¨ä¸­å·²å…³é—­çš„åˆ†ç»„ |
| **æ’åºè§„åˆ™** | æ‰“å¼€çš„åˆ†ç»„åœ¨å‰ï¼Œå·²ä¿å­˜çš„åˆ†ç»„åœ¨åï¼›åŒç»„å†…æŒ‰æœ€åæ´»è·ƒæ—¶é—´å€’åº |

**åŠ è½½æµç¨‹ï¼š**

```
1. chrome.tabGroups.query({}) â†’ è·å–æ‰€æœ‰æ‰“å¼€çš„åˆ†ç»„
2. å¯¹æ¯ä¸ªæ‰“å¼€çš„åˆ†ç»„: chrome.tabs.query({groupId}) â†’ è·å–å…¶æ ‡ç­¾é¡µ
3. chrome.storage.local.get('tabGroupSnapshots') â†’ è·å–æœ¬åœ°å¿«ç…§
4. åˆå¹¶: æ‰“å¼€åˆ†ç»„çš„ stableKey å»é‡æœ¬åœ°å¿«ç…§
5. æœ¬åœ°å¿«ç…§ä¸­ä¸åœ¨æ‰“å¼€åˆ—è¡¨ä¸­çš„ â†’ æ ‡è®°ä¸º "å·²ä¿å­˜"
6. åˆå¹¶æ’åºåè¾“å‡º
```

#### F4: åˆ†ç»„æ ‘çŠ¶å±•ç¤º UI

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | ä»¥åˆ†ç»„å¤´ + å­æ ‡ç­¾é¡µåˆ—è¡¨çš„æ ‘çŠ¶ç»“æ„å±•ç¤ºæœç´¢ç»“æœ |
| **åˆ†ç»„å¤´** | æ˜¾ç¤ºé¢œè‰²åœ†ç‚¹ã€æ ‡é¢˜ã€çŠ¶æ€æ ‡ç­¾ï¼ˆæ‰“å¼€/å·²ä¿å­˜ï¼‰ã€æ ‡ç­¾é¡µæ•°é‡ã€æŠ˜å /å±•å¼€æŒ‰é’® |
| **å­æ ‡ç­¾é¡µ** | ç¼©è¿›æ˜¾ç¤ºï¼ŒåŒ…å« faviconã€æ ‡é¢˜ã€URL |
| **æŠ˜å /å±•å¼€** | ç‚¹å‡»åˆ†ç»„å¤´å¯æŠ˜å /å±•å¼€å­æ ‡ç­¾é¡µåˆ—è¡¨ |

**åˆ†ç»„å¤´å…ƒç´ ç»“æ„ï¼š**

```html
<div class="group-header open">
  <span class="group-color-dot" style="background: var(--group-color-red)"></span>
  <span class="group-title">langchain-1.2</span>
  <span class="group-status-badge open">æ‰“å¼€</span>
  <span class="group-tab-count">3 ä¸ªæ ‡ç­¾</span>
  <span class="group-toggle-icon">â–¼</span>
</div>
```

**å­æ ‡ç­¾é¡µå…ƒç´ ç»“æ„ï¼š**

```html
<div class="group-body">
  <div class="group-tab-item">
    <img class="group-tab-favicon" src="..." />
    <div class="group-tab-content">
      <div class="group-tab-title">LangChain Docs</div>
      <div class="group-tab-url">https://docs.langchain.com/</div>
    </div>
  </div>
  <!-- æ›´å¤šæ ‡ç­¾é¡µ... -->
</div>
```

**é¢œè‰²æ˜ å°„ï¼š**

| Chrome é¢œè‰² | CSS å˜é‡ | å€¼ |
|-------------|---------|-----|
| grey | `--group-color-grey` | `#5f6368` |
| blue | `--group-color-blue` | `#1a73e8` |
| red | `--group-color-red` | `#d93025` |
| yellow | `--group-color-yellow` | `#f9ab00` |
| green | `--group-color-green` | `#188038` |
| pink | `--group-color-pink` | `#d01884` |
| purple | `--group-color-purple` | `#a142f4` |
| cyan | `--group-color-cyan` | `#007b83` |
| orange | `--group-color-orange` | `#e8710a` |

#### F5: åˆ†ç»„ç©¿é€æœç´¢

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | æœç´¢æ—¶åŒæ—¶åŒ¹é…åˆ†ç»„åç§°å’Œåˆ†ç»„å†…æ ‡ç­¾é¡µçš„æ ‡é¢˜/URL |
| **åŒ¹é…è§„åˆ™** | åˆ†ç»„åç§°å‘½ä¸­ â†’ å±•ç¤ºæ•´ä¸ªåˆ†ç»„æ‰€æœ‰æ ‡ç­¾é¡µï¼›æ ‡ç­¾é¡µå‘½ä¸­ â†’ ä»…å±•ç¤ºå‘½ä¸­çš„æ ‡ç­¾é¡µ |
| **æœç´¢è¯­æ³•** | å¤ç”¨ç°æœ‰ SearchParser çš„ `site:`ã€`in:` ç­‰è¯­æ³• |

**æœç´¢åŒ¹é…é€»è¾‘ï¼š**

```
è¾“å…¥æœç´¢è¯ â†’ éå†æ‰€æœ‰åˆ†ç»„:
  â”œâ”€ åˆ†ç»„æ ‡é¢˜åŒ¹é…ï¼Ÿâ†’ è¿”å›å®Œæ•´åˆ†ç»„ï¼ˆæ‰€æœ‰æ ‡ç­¾é¡µï¼‰
  â”œâ”€ åˆ†ç»„å†…æ ‡ç­¾é¡µåŒ¹é…ï¼Ÿâ†’ è¿”å›åˆ†ç»„ï¼ˆä»…å«å‘½ä¸­çš„æ ‡ç­¾é¡µï¼‰
  â””â”€ éƒ½ä¸åŒ¹é…ï¼Ÿâ†’ è¿‡æ»¤æ‰
```

#### F6: åˆ†ç»„æ“ä½œ

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | å¯¹åˆ†ç»„å’Œåˆ†ç»„å†…æ ‡ç­¾é¡µæä¾›æ“ä½œ |

**æ“ä½œåˆ—è¡¨ï¼š**

| æ“ä½œ | ç›®æ ‡ | è¡Œä¸º | è§¦å‘æ–¹å¼ |
|------|------|------|---------|
| åˆ‡æ¢åˆ°åˆ†ç»„ | æ‰“å¼€çš„åˆ†ç»„ | æ¿€æ´»åˆ†ç»„ä¸­ç¬¬ä¸€ä¸ªæ ‡ç­¾é¡µï¼Œèšç„¦å…¶çª—å£ | ç‚¹å‡»åˆ†ç»„å¤´ |
| æ¢å¤åˆ†ç»„ | å·²ä¿å­˜çš„åˆ†ç»„ | åˆ›å»ºæ‰€æœ‰æ ‡ç­¾é¡µ â†’ å½’ç»„ â†’ è®¾ç½®æ ‡é¢˜é¢œè‰² | ç‚¹å‡»åˆ†ç»„å¤´ |
| åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ | æ‰“å¼€åˆ†ç»„å†…çš„æ ‡ç­¾é¡µ | `chrome.tabs.update(id, {active:true})` | ç‚¹å‡»å­æ ‡ç­¾é¡µ |
| æ‰“å¼€æ ‡ç­¾é¡µ | å·²ä¿å­˜åˆ†ç»„å†…çš„æ ‡ç­¾é¡µ | `chrome.tabs.create({url})` | ç‚¹å‡»å­æ ‡ç­¾é¡µ |

---

### P1 - å¢å¼ºåŠŸèƒ½

#### F7: åˆ†ç»„ç»Ÿè®¡æ 

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | åœ¨ç»Ÿè®¡æ æ˜¾ç¤ºåˆ†ç»„ç»Ÿè®¡ä¿¡æ¯ |
| **æ˜¾ç¤ºå†…å®¹** | "å…± N ä¸ªåˆ†ç»„ (M æ‰“å¼€ Â· K å·²ä¿å­˜)" |

#### F8: åˆ†ç»„å³é”®èœå•

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | å³é”®åˆ†ç»„å¤´å’Œå­æ ‡ç­¾é¡µæ—¶æ˜¾ç¤ºæ“ä½œèœå• |

**åˆ†ç»„å¤´å³é”®èœå•ï¼š**

| èœå•é¡¹ | è¡Œä¸º |
|--------|------|
| æ‰“å¼€åˆ†ç»„ | æ¢å¤/æ¿€æ´»åˆ†ç»„ |
| å¤åˆ¶æ‰€æœ‰é“¾æ¥ | å°†åˆ†ç»„å†…æ‰€æœ‰æ ‡ç­¾é¡µ URL å¤åˆ¶åˆ°å‰ªè´´æ¿ |
| å…³é—­åˆ†ç»„ | å…³é—­åˆ†ç»„å†…æ‰€æœ‰æ ‡ç­¾é¡µï¼ˆä»…å¯¹æ‰“å¼€çš„åˆ†ç»„ï¼‰ |
| åˆ é™¤å¿«ç…§ | ä»æœ¬åœ°å­˜å‚¨ä¸­åˆ é™¤è¯¥åˆ†ç»„çš„å¿«ç…§æ•°æ® |

**å­æ ‡ç­¾é¡µå³é”®èœå•ï¼š**

| èœå•é¡¹ | è¡Œä¸º |
|--------|------|
| æ‰“å¼€æ ‡ç­¾é¡µ | åˆ›å»ºæ–°æ ‡ç­¾é¡µæ‰“å¼€è¯¥ URL |
| å¤åˆ¶é“¾æ¥ | å¤åˆ¶ URL åˆ°å‰ªè´´æ¿ |

#### F9: é»˜è®¤æŠ˜å /å±•å¼€ç­–ç•¥

| å±æ€§ | è¯´æ˜ |
|------|------|
| **åŠŸèƒ½æè¿°** | æ™ºèƒ½æ§åˆ¶åˆ†ç»„çš„é»˜è®¤æŠ˜å çŠ¶æ€ |
| **æ— æœç´¢æ—¶** | æ‰€æœ‰åˆ†ç»„é»˜è®¤æŠ˜å ï¼ˆåªæ˜¾ç¤ºåˆ†ç»„å¤´ï¼‰ |
| **æœç´¢æ—¶** | æœ‰å‘½ä¸­çš„åˆ†ç»„è‡ªåŠ¨å±•å¼€ï¼Œä»…æ˜¾ç¤ºå‘½ä¸­çš„æ ‡ç­¾é¡µ |

---

### P2 - æœªæ¥è§„åˆ’

#### F10: åˆ†ç»„æœç´¢è¯­æ³•æ‰©å±•

- `group:åˆ†ç»„å` â€” æœç´¢ç‰¹å®šåˆ†ç»„å†…çš„æ ‡ç­¾é¡µ
- `color:red` â€” æŒ‰é¢œè‰²ç­›é€‰åˆ†ç»„

#### F11: åˆ†ç»„æ‹–æ‹½æ’åº

- æ‹–æ‹½å­æ ‡ç­¾é¡µåœ¨åˆ†ç»„é—´ç§»åŠ¨
- æ‹–æ‹½åˆ†ç»„è°ƒæ•´é¡ºåº

#### F12: åˆ†ç»„æ•°æ®å¯¼å‡º

- æ”¯æŒå¯¼å‡ºæ‰€æœ‰åˆ†ç»„å¿«ç…§ä¸º JSON æ–‡ä»¶
- æ”¯æŒä» JSON æ–‡ä»¶å¯¼å…¥æ¢å¤

---

## æŠ€æœ¯æ–¹æ¡ˆ

### 1. æƒé™å˜æ›´

`manifest.json` æ–°å¢æƒé™ï¼š

```json
{
  "permissions": [
    "bookmarks", "tabs", "tabGroups", "history",
    "downloads", "storage", "favicon", "activeTab",
    "scripting", "alarms"
  ]
}
```

æ–°å¢ï¼š`tabGroups`ï¼ˆåˆ†ç»„ API è®¿é—®ï¼‰ã€`alarms`ï¼ˆå®šæœŸåŒæ­¥ä»»åŠ¡ï¼‰

### 2. Background å¿«ç…§æœåŠ¡

åœ¨ `background.js` ä¸­æ–°å¢åˆ†ç»„å¿«ç…§ç®¡ç†æ¨¡å—ï¼š

```javascript
const TAB_GROUP_STORAGE_KEY = 'tabGroupSnapshots';

// ä¿å­˜å•ä¸ªåˆ†ç»„çš„å¿«ç…§
async function saveGroupSnapshot(groupId) {
  try {
    const group = await chrome.tabGroups.get(groupId);
    const tabs = await chrome.tabs.query({ groupId });
    
    const stableKey = `${group.title || ''}_${group.color}`;
    const snapshot = {
      stableKey,
      title: group.title || '',
      color: group.color,
      tabs: tabs.map(t => ({
        url: t.url,
        title: t.title,
        favIconUrl: t.favIconUrl
      })),
      isOpen: true,
      lastSeen: Date.now(),
      closedAt: null,
      createdAt: null  // é¦–æ¬¡åˆ›å»ºæ—¶å¡«å…¥
    };

    const data = await chrome.storage.local.get(TAB_GROUP_STORAGE_KEY);
    const snapshots = data[TAB_GROUP_STORAGE_KEY] || {};
    
    if (!snapshots[stableKey]) {
      snapshot.createdAt = Date.now();
    } else {
      snapshot.createdAt = snapshots[stableKey].createdAt;
    }
    
    snapshots[stableKey] = snapshot;
    await chrome.storage.local.set({ [TAB_GROUP_STORAGE_KEY]: snapshots });
  } catch (e) {
    // åˆ†ç»„å¯èƒ½å·²è¢«å…³é—­ï¼Œå¿½ç•¥
  }
}

// å¤„ç†åˆ†ç»„å…³é—­
async function handleGroupRemoved(group) {
  const stableKey = `${group.title || ''}_${group.color}`;
  const data = await chrome.storage.local.get(TAB_GROUP_STORAGE_KEY);
  const snapshots = data[TAB_GROUP_STORAGE_KEY] || {};
  
  if (snapshots[stableKey]) {
    snapshots[stableKey].isOpen = false;
    snapshots[stableKey].closedAt = Date.now();
    await chrome.storage.local.set({ [TAB_GROUP_STORAGE_KEY]: snapshots });
  }
}

// å…¨é‡åŒæ­¥
async function syncAllGroups() {
  const openGroups = await chrome.tabGroups.query({});
  const data = await chrome.storage.local.get(TAB_GROUP_STORAGE_KEY);
  const snapshots = data[TAB_GROUP_STORAGE_KEY] || {};
  
  // æ ‡è®°æ‰€æœ‰ä¸ºå…³é—­ï¼Œç„¶åé€ä¸ªæ›´æ–°æ‰“å¼€çš„
  const openKeys = new Set();
  for (const group of openGroups) {
    await saveGroupSnapshot(group.id);
    openKeys.add(`${group.title || ''}_${group.color}`);
  }
  
  // ä¸åœ¨ openKeys ä¸­çš„æ ‡è®°ä¸ºå·²å…³é—­
  for (const key of Object.keys(snapshots)) {
    if (!openKeys.has(key) && snapshots[key].isOpen) {
      snapshots[key].isOpen = false;
      snapshots[key].closedAt = Date.now();
    }
  }
  
  await chrome.storage.local.set({ [TAB_GROUP_STORAGE_KEY]: snapshots });
}

// æ³¨å†Œäº‹ä»¶ç›‘å¬
chrome.tabGroups.onCreated.addListener(g => saveGroupSnapshot(g.id));
chrome.tabGroups.onUpdated.addListener(g => saveGroupSnapshot(g.id));
chrome.tabGroups.onRemoved.addListener(handleGroupRemoved);

// å®šæœŸå…¨é‡åŒæ­¥
chrome.alarms.create('syncTabGroups', { periodInMinutes: 5 });
chrome.alarms.onAlarm.addListener(alarm => {
  if (alarm.name === 'syncTabGroups') syncAllGroups();
});

// æ‰©å±•å¯åŠ¨æ—¶ç«‹å³åŒæ­¥ä¸€æ¬¡
chrome.runtime.onStartup.addListener(syncAllGroups);
chrome.runtime.onInstalled.addListener(syncAllGroups);
```

### 3. popup.html å˜æ›´

æ¨¡å¼é€‰æ‹©æ æ–°å¢ "åˆ†ç»„" æŒ‰é’®ï¼š

```html
<div class="mode-selector">
  <div class="tab-group">
    <button class="tab-btn active" data-mode="bookmarks">
      <span class="tab-label">ä¹¦ç­¾</span>
    </button>
    <button class="tab-btn" data-mode="tabs">
      <span class="tab-label">æ ‡ç­¾é¡µ</span>
    </button>
    <button class="tab-btn" data-mode="groups">
      <span class="tab-label">åˆ†ç»„</span>
    </button>
    <button class="tab-btn" data-mode="history">
      <span class="tab-label">å†å²</span>
    </button>
    <button class="tab-btn" data-mode="downloads">
      <span class="tab-label">ä¸‹è½½</span>
    </button>
  </div>
  <button id="settingsBtn" class="settings-btn" title="è®¾ç½®">...</button>
</div>
```

### 4. popup.js æ ¸å¿ƒå˜æ›´

#### 4.1 æ•°æ®å˜é‡

```javascript
let allGroups = [];  // æ–°å¢ï¼šæ‰€æœ‰åˆ†ç»„æ•°æ®
```

#### 4.2 æ¨¡å¼æ•°ç»„æ‰©å±•

```javascript
// å˜æ›´å‰
const modes = ['bookmarks', 'tabs', 'history', 'downloads'];

// å˜æ›´å
const modes = ['bookmarks', 'tabs', 'groups', 'history', 'downloads'];
```

#### 4.3 loadGroups å‡½æ•°

```javascript
async function loadGroups() {
  // è·å–å½“å‰æ‰“å¼€çš„åˆ†ç»„ï¼ˆå®æ—¶ï¼‰
  const openGroups = await chrome.tabGroups.query({});
  const openGroupsWithTabs = await Promise.all(
    openGroups.map(async group => {
      const tabs = await chrome.tabs.query({ groupId: group.id });
      return {
        stableKey: `${group.title || ''}_${group.color}`,
        title: group.title || 'æœªå‘½ååˆ†ç»„',
        color: group.color,
        tabs: tabs.map(t => ({
          id: t.id,
          url: t.url,
          title: t.title,
          favIconUrl: t.favIconUrl,
          windowId: t.windowId
        })),
        isOpen: true,
        groupId: group.id,
        windowId: group.windowId
      };
    })
  );

  // è·å–æœ¬åœ°å¿«ç…§ï¼ˆå·²ä¿å­˜çš„å…³é—­åˆ†ç»„ï¼‰
  const data = await chrome.storage.local.get('tabGroupSnapshots');
  const snapshots = data.tabGroupSnapshots || {};
  
  // åˆå¹¶ï¼šæ‰“å¼€çš„ä¼˜å…ˆï¼Œè¡¥å……å·²å…³é—­çš„
  const openKeys = new Set(openGroupsWithTabs.map(g => g.stableKey));
  const closedGroups = Object.values(snapshots)
    .filter(s => !openKeys.has(s.stableKey) && s.tabs && s.tabs.length > 0)
    .map(s => ({ ...s, isOpen: false }));
  
  allGroups = [...openGroupsWithTabs, ...closedGroups];
  
  // æ›´æ–°ç»Ÿè®¡
  const openCount = openGroupsWithTabs.length;
  const savedCount = closedGroups.length;
  totalCountElement.textContent = allGroups.length;
  
  if (currentMode === 'groups') {
    displayGroupResults(allGroups);
  }
}
```

#### 4.4 displayGroupResults å‡½æ•°

```javascript
function displayGroupResults(groups) {
  const resultsList = document.getElementById('resultsList');
  if (!resultsList) return;
  resultsList.innerHTML = '';
  currentResults = groups;

  if (groups.length === 0) {
    resultsList.innerHTML = '<div class="no-results">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„åˆ†ç»„</div>';
    return;
  }

  groups.forEach((group, groupIndex) => {
    // åˆ†ç»„å¤´
    const header = document.createElement('div');
    header.className = `group-header ${group.isOpen ? 'open' : 'saved'}`;
    header.dataset.groupIndex = groupIndex;
    
    const colorDot = document.createElement('span');
    colorDot.className = 'group-color-dot';
    colorDot.style.background = `var(--group-color-${group.color})`;
    
    const title = document.createElement('span');
    title.className = 'group-title';
    title.textContent = group.title || 'æœªå‘½ååˆ†ç»„';
    
    const badge = document.createElement('span');
    badge.className = `group-status-badge ${group.isOpen ? 'open' : 'saved'}`;
    badge.textContent = group.isOpen ? 'æ‰“å¼€' : 'å·²ä¿å­˜';
    
    const count = document.createElement('span');
    count.className = 'group-tab-count';
    count.textContent = `${group.tabs.length} ä¸ªæ ‡ç­¾`;
    
    const toggle = document.createElement('span');
    toggle.className = 'group-toggle-icon';
    toggle.textContent = 'â–¶';
    
    header.append(colorDot, title, badge, count, toggle);
    
    // åˆ†ç»„ä½“ï¼ˆå­æ ‡ç­¾é¡µåˆ—è¡¨ï¼‰
    const body = document.createElement('div');
    body.className = 'group-body collapsed';
    
    group.tabs.forEach((tab, tabIndex) => {
      const tabItem = document.createElement('div');
      tabItem.className = 'group-tab-item';
      tabItem.dataset.url = tab.url;
      tabItem.dataset.tabId = tab.id || '';
      tabItem.dataset.groupOpen = group.isOpen;
      
      const favicon = document.createElement('img');
      favicon.className = 'group-tab-favicon';
      try {
        const url = new URL(tab.url);
        favicon.src = `chrome-extension://${chrome.runtime.id}/_favicon/?pageUrl=${encodeURIComponent(tab.url)}&size=16`;
      } catch (e) {
        favicon.src = 'icons/icon16.png';
      }
      favicon.onerror = () => { favicon.src = 'icons/icon16.png'; };
      
      const content = document.createElement('div');
      content.className = 'group-tab-content';
      
      const tabTitle = document.createElement('div');
      tabTitle.className = 'group-tab-title';
      tabTitle.textContent = tab.title || 'æ— æ ‡é¢˜';
      
      const tabUrl = document.createElement('div');
      tabUrl.className = 'group-tab-url';
      tabUrl.textContent = tab.url;
      
      content.append(tabTitle, tabUrl);
      tabItem.append(favicon, content);
      body.appendChild(tabItem);
      
      // æ ‡ç­¾é¡µç‚¹å‡»äº‹ä»¶
      tabItem.addEventListener('click', (e) => {
        e.stopPropagation();
        if (group.isOpen && tab.id) {
          chrome.tabs.update(tab.id, { active: true });
          chrome.windows.update(tab.windowId || group.windowId, { focused: true });
        } else {
          chrome.tabs.create({ url: tab.url });
        }
        window.close();
      });
    });
    
    resultsList.appendChild(header);
    resultsList.appendChild(body);
    
    // åˆ†ç»„å¤´ç‚¹å‡»äº‹ä»¶ï¼šæŠ˜å /å±•å¼€
    header.addEventListener('click', () => {
      body.classList.toggle('collapsed');
      toggle.textContent = body.classList.contains('collapsed') ? 'â–¶' : 'â–¼';
    });
  });
}
```

#### 4.5 searchGroups æœç´¢å‡½æ•°

```javascript
function searchGroups(query, groups) {
  if (!query || !query.trim()) return groups;
  
  const parsed = window.SearchParser.parse(query);
  const keywords = parsed.keywords.toLowerCase().split(/\s+/).filter(Boolean);
  
  return groups.map(group => {
    // åˆ†ç»„æ ‡é¢˜åŒ¹é…
    const titleText = (group.title || '').toLowerCase();
    const titleMatch = keywords.every(kw => titleText.includes(kw));
    
    if (titleMatch) {
      return { ...group }; // åˆ†ç»„ååŒ¹é…ï¼Œè¿”å›æ‰€æœ‰æ ‡ç­¾é¡µ
    }
    
    // åˆ†ç»„å†…æ ‡ç­¾é¡µåŒ¹é…
    const matchedTabs = group.tabs.filter(tab => {
      const tabTitle = (tab.title || '').toLowerCase();
      const tabUrl = (tab.url || '').toLowerCase();
      return keywords.every(kw => tabTitle.includes(kw) || tabUrl.includes(kw));
    });
    
    if (matchedTabs.length > 0) {
      return { ...group, tabs: matchedTabs };
    }
    
    return null;
  }).filter(Boolean);
}
```

#### 4.6 restoreGroup æ¢å¤åˆ†ç»„

```javascript
async function restoreGroup(savedGroup) {
  const tabIds = [];
  for (const tabInfo of savedGroup.tabs) {
    const tab = await chrome.tabs.create({ url: tabInfo.url, active: false });
    tabIds.push(tab.id);
  }
  
  if (tabIds.length > 0) {
    const groupId = await chrome.tabs.group({ tabIds });
    await chrome.tabGroups.update(groupId, {
      title: savedGroup.title,
      color: savedGroup.color,
      collapsed: true
    });
  }
}
```

### 5. CSS æ ·å¼

åœ¨ `css/popup.css` ä¸­æ–°å¢åˆ†ç»„ç›¸å…³æ ·å¼ï¼š

```css
/* ===== åˆ†ç»„é¢œè‰²å˜é‡ ===== */
:root {
  --group-color-grey: #5f6368;
  --group-color-blue: #1a73e8;
  --group-color-red: #d93025;
  --group-color-yellow: #f9ab00;
  --group-color-green: #188038;
  --group-color-pink: #d01884;
  --group-color-purple: #a142f4;
  --group-color-cyan: #007b83;
  --group-color-orange: #e8710a;
}

/* ===== åˆ†ç»„å¤´ ===== */
.group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  margin: 4px 0 0;
  border-radius: 8px 8px 0 0;
  cursor: pointer;
  transition: background-color 0.15s ease-out;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-bottom: none;
}

.group-header:hover {
  background: var(--color-hover);
}

.group-color-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  flex-shrink: 0;
}

.group-title {
  font-weight: 600;
  font-size: var(--font-size-base);
  color: var(--color-text);
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.group-status-badge {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 500;
  flex-shrink: 0;
}

.group-status-badge.open {
  background: var(--group-color-green);
  color: white;
}

.group-status-badge.saved {
  background: var(--color-text-secondary);
  color: white;
  opacity: 0.7;
}

.group-tab-count {
  font-size: 12px;
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.group-toggle-icon {
  font-size: 10px;
  color: var(--color-text-secondary);
  transition: transform 0.2s;
  flex-shrink: 0;
  width: 16px;
  text-align: center;
}

/* ===== åˆ†ç»„ä½“ï¼ˆæ ‡ç­¾é¡µåˆ—è¡¨ï¼‰ ===== */
.group-body {
  border: 1px solid var(--color-border);
  border-top: none;
  border-radius: 0 0 8px 8px;
  margin-bottom: 4px;
  overflow: hidden;
  transition: max-height 0.25s ease-out, opacity 0.2s;
}

.group-body.collapsed {
  max-height: 0;
  opacity: 0;
  border: none;
  margin-bottom: 0;
}

.group-tab-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 12px 6px 32px;
  cursor: pointer;
  transition: background-color 0.1s;
  border-top: 1px solid var(--color-border);
}

.group-tab-item:first-child {
  border-top: 1px solid var(--color-border);
}

.group-tab-item:hover {
  background: var(--color-hover);
}

.group-tab-favicon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  border-radius: 2px;
}

.group-tab-content {
  flex: 1;
  min-width: 0;
}

.group-tab-title {
  font-size: var(--font-size-sm);
  color: var(--color-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.group-tab-url {
  font-size: 11px;
  color: var(--color-text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== æ·±è‰²ä¸»é¢˜é€‚é… ===== */
.dark-theme .group-status-badge.saved {
  opacity: 0.6;
}
```

---

## UI è®¾è®¡

### æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ä¹¦ç­¾] [æ ‡ç­¾é¡µ] [åˆ†ç»„] [å†å²] [ä¸‹è½½]        [âš™]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” æœç´¢åˆ†ç»„æˆ–åˆ†ç»„å†…æ ‡ç­¾é¡µ...                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†â†’ åˆ‡æ¢  â†‘â†“ é€‰æ‹©  â†µ æ‰“å¼€  ? æ›´å¤š                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š å…± 15 ä¸ªåˆ†ç»„                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ”´ langchain-1.2      [æ‰“å¼€] 3ä¸ªæ ‡ç­¾    â–¶      â”‚
â”‚  â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€   â”‚
â”‚  ğŸŸ  Cursur/Skill/Mcp   [å·²ä¿å­˜] 5ä¸ªæ ‡ç­¾  â–¶      â”‚
â”‚  â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€   â”‚
â”‚  ğŸŸ¢ èƒ½åŠ›æå‡            [æ‰“å¼€] 2ä¸ªæ ‡ç­¾    â–¼      â”‚
â”‚    â”œâ”€ ğŸ“„ å­¦ä¹ è·¯çº¿æŒ‡å—    learn.example.com        â”‚
â”‚    â””â”€ ğŸ“„ æŠ€èƒ½æ ‘          skills.dev               â”‚
â”‚  â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€   â”‚
â”‚  ğŸŸ£ Figma              [å·²ä¿å­˜] 4ä¸ªæ ‡ç­¾  â–¶      â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æœç´¢æ—¶å±•å¼€å‘½ä¸­é¡¹

```
æœç´¢: "langchain"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” langchain                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š æ‰¾åˆ° 1 ä¸ªåˆ†ç»„                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  ğŸ”´ langchain-1.2      [æ‰“å¼€] 3ä¸ªæ ‡ç­¾    â–¼      â”‚
â”‚    â”œâ”€ ğŸ“„ LangChain Docs     docs.langchain...   â”‚
â”‚    â”œâ”€ ğŸ“„ LangChain GitHub   github.com/lan...    â”‚
â”‚    â””â”€ ğŸ“„ LangChain Tutorial tutorial.lang...     â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æµ‹è¯•ç”¨ä¾‹

### åˆ†ç»„å¿«ç…§æµ‹è¯•

| ç”¨ä¾‹ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|---------|
| TC1 | åˆ›å»ºæ–°åˆ†ç»„ï¼ˆ3ä¸ªæ ‡ç­¾é¡µï¼‰ | background å¿«ç…§è®°å½•åˆ†ç»„å’Œæ ‡ç­¾é¡µ |
| TC2 | é‡å‘½ååˆ†ç»„ | å¿«ç…§ stableKey è¿ç§»åˆ°æ–°åç§° |
| TC3 | å…³é—­åˆ†ç»„ | å¿«ç…§æ ‡è®° isOpen=falseï¼Œæ•°æ®ä¿ç•™ |
| TC4 | é‡æ–°æ‰“å¼€åˆ†ç»„ | å¿«ç…§æ›´æ–° isOpen=trueï¼Œæ ‡ç­¾é¡µåˆ—è¡¨åˆ·æ–° |
| TC5 | ç­‰å¾… 5 åˆ†é’Ÿ | å®šæœŸåŒæ­¥æ›´æ–°æ‰€æœ‰å¿«ç…§ |

### åˆ†ç»„æœç´¢æµ‹è¯•

| ç”¨ä¾‹ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|---------|
| TC6 | åˆ‡æ¢åˆ°åˆ†ç»„æ¨¡å¼ | æ˜¾ç¤ºæ‰€æœ‰åˆ†ç»„ï¼ˆæ‰“å¼€+å·²ä¿å­˜ï¼‰ï¼Œé»˜è®¤æŠ˜å  |
| TC7 | æœç´¢åˆ†ç»„åç§° "langchain" | æ˜¾ç¤ºåŒ¹é…çš„åˆ†ç»„ï¼Œè‡ªåŠ¨å±•å¼€ |
| TC8 | æœç´¢æ ‡ç­¾é¡µæ ‡é¢˜ "GitHub" | æ˜¾ç¤ºåŒ…å«åŒ¹é…æ ‡ç­¾é¡µçš„åˆ†ç»„ï¼Œä»…å±•ç¤ºå‘½ä¸­çš„æ ‡ç­¾é¡µ |
| TC9 | æœç´¢ä¸å­˜åœ¨çš„å…³é”®è¯ | æ˜¾ç¤º "æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„åˆ†ç»„" |
| TC10 | æ¸…ç©ºæœç´¢æ¡† | æ¢å¤æ˜¾ç¤ºæ‰€æœ‰åˆ†ç»„ï¼Œé»˜è®¤æŠ˜å  |

### åˆ†ç»„æ“ä½œæµ‹è¯•

| ç”¨ä¾‹ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|---------|
| TC11 | ç‚¹å‡»æ‰“å¼€åˆ†ç»„çš„æ ‡ç­¾é¡µ | æ¿€æ´»è¯¥æ ‡ç­¾é¡µå¹¶èšç„¦çª—å£ |
| TC12 | ç‚¹å‡»å·²ä¿å­˜åˆ†ç»„çš„æ ‡ç­¾é¡µ | æ–°å»ºæ ‡ç­¾é¡µæ‰“å¼€ URL |
| TC13 | ç‚¹å‡»åˆ†ç»„å¤´æŠ˜å /å±•å¼€ | å­æ ‡ç­¾é¡µåˆ—è¡¨æ˜¾ç¤º/éšè— |
| TC14 | ä½¿ç”¨ â†â†’ åˆ‡æ¢æ¨¡å¼ | å¯åˆ‡æ¢åˆ°åˆ†ç»„æ¨¡å¼ |

### è¾¹ç•Œæƒ…å†µæµ‹è¯•

| ç”¨ä¾‹ | åœºæ™¯ | é¢„æœŸç»“æœ |
|------|------|---------|
| TC15 | æ— ä»»ä½•åˆ†ç»„ | æ˜¾ç¤ºç©ºçŠ¶æ€æç¤º |
| TC16 | åˆ†ç»„æ— æ ‡é¢˜ | æ˜¾ç¤º "æœªå‘½ååˆ†ç»„" |
| TC17 | æ‰©å±•é¦–æ¬¡å®‰è£… | æ‰«æå½“å‰æ‰“å¼€çš„åˆ†ç»„ï¼Œå»ºç«‹åˆå§‹å¿«ç…§ |
| TC18 | åˆ†ç»„å†…æœ‰æ— æ•ˆ URL | favicon é™çº§æ˜¾ç¤ºé»˜è®¤å›¾æ ‡ |

---

## éªŒæ”¶æ ‡å‡†

- [ ] manifest.json æ–°å¢ `tabGroups` å’Œ `alarms` æƒé™
- [ ] background.js æ­£ç¡®ç›‘å¬åˆ†ç»„äº‹ä»¶å¹¶ä¿å­˜å¿«ç…§
- [ ] å®šæœŸå…¨é‡åŒæ­¥æ­£å¸¸å·¥ä½œ
- [ ] æ¨¡å¼é€‰æ‹©æ æ˜¾ç¤º "åˆ†ç»„" TABï¼Œé¡ºåºæ­£ç¡®
- [ ] â†â†’ é”®èƒ½åˆ‡æ¢åˆ°åˆ†ç»„æ¨¡å¼
- [ ] åˆ†ç»„æ¨¡å¼ä¸‹æ˜¾ç¤ºæ‰€æœ‰åˆ†ç»„ï¼ˆæ‰“å¼€+å·²ä¿å­˜ï¼‰
- [ ] æ ‘çŠ¶å±•ç¤ºï¼šåˆ†ç»„å¤´ + å¯æŠ˜å çš„å­æ ‡ç­¾é¡µåˆ—è¡¨
- [ ] åˆ†ç»„é¢œè‰²åœ†ç‚¹æ­£ç¡®æ˜¾ç¤º 9 ç§é¢œè‰²
- [ ] çŠ¶æ€æ ‡ç­¾æ­£ç¡®æ˜¾ç¤º "æ‰“å¼€" / "å·²ä¿å­˜"
- [ ] æœç´¢å¯åŒ¹é…åˆ†ç»„åç§°
- [ ] æœç´¢å¯ç©¿é€åŒ¹é…åˆ†ç»„å†…æ ‡ç­¾é¡µ
- [ ] æœç´¢æ—¶å‘½ä¸­çš„åˆ†ç»„è‡ªåŠ¨å±•å¼€
- [ ] ç‚¹å‡»æ‰“å¼€åˆ†ç»„çš„æ ‡ç­¾é¡µï¼šæ¿€æ´»å¹¶èšç„¦
- [ ] ç‚¹å‡»å·²ä¿å­˜åˆ†ç»„çš„æ ‡ç­¾é¡µï¼šæ–°å»ºæ ‡ç­¾é¡µæ‰“å¼€
- [ ] æ·±è‰²æ¨¡å¼ä¸‹æ ·å¼æ­£å¸¸
- [ ] æ— æ§åˆ¶å°é”™è¯¯

---

## æ€§èƒ½è€ƒè™‘

### å¿«ç…§å­˜å‚¨å¼€é”€

| é¡¹ç›® | ä¼°ç®— |
|------|------|
| å•ä¸ªåˆ†ç»„å¿«ç…§å¤§å° | ~200 bytes (æ ‡é¢˜+é¢œè‰²+å…ƒä¿¡æ¯) + ~150 bytes/æ ‡ç­¾é¡µ (URL+æ ‡é¢˜) |
| 50 ä¸ªåˆ†ç»„ Ã— 10 ä¸ªæ ‡ç­¾é¡µ/åˆ†ç»„ | ~80 KB |
| 200 ä¸ªåˆ†ç»„ Ã— 10 ä¸ªæ ‡ç­¾é¡µ/åˆ†ç»„ | ~320 KB |
| chrome.storage.local é™åˆ¶ | 10 MB |

**ç»“è®º**ï¼šå³ä½¿ç”¨æˆ·æœ‰å¤§é‡åˆ†ç»„ï¼Œå­˜å‚¨å¼€é”€ä¹Ÿè¿œä½äºé™åˆ¶ã€‚

### å®šæ—¶åŒæ­¥å¼€é”€

- æ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å…¨é‡æ‰«æ
- ä¸»è¦å¼€é”€ï¼š`tabGroups.query()` + N æ¬¡ `tabs.query({groupId})`
- Service Worker è¢«å”¤é†’åæ‰§è¡Œï¼Œä¸å½±å“ç”¨æˆ·ä½“éªŒ

### åŠ è½½åˆ†ç»„çš„å¼€é”€

- è·å–æ‰“å¼€åˆ†ç»„ï¼š`tabGroups.query()` (1 æ¬¡) + `tabs.query()` (N æ¬¡)
- è·å–æœ¬åœ°å¿«ç…§ï¼š`storage.local.get()` (1 æ¬¡)
- åˆå¹¶å’Œæ¸²æŸ“ï¼šçº¯è®¡ç®—ï¼Œå¼€é”€å¯å¿½ç•¥

---

## é£é™©è¯„ä¼°

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| onRemoved è§¦å‘æ—¶æ ‡ç­¾é¡µå·²ä¸å¯æŸ¥è¯¢ | å¿«ç…§æ•°æ®å¯èƒ½ä¸¢å¤±æ ‡ç­¾é¡µä¿¡æ¯ | ä¸­ | æŒç»­å¿«ç…§ç­–ç•¥ï¼ˆä¸ä¾èµ– onRemoved æ—¶æŠ“å–ï¼‰ |
| Group ID å˜åŒ–å¯¼è‡´æ‰“å¼€çŠ¶æ€è¯¯åˆ¤ | åˆ†ç»„æ˜¾ç¤ºçŠ¶æ€ä¸æ­£ç¡® | ä½ | ä½¿ç”¨ stableKey åŒ¹é…ï¼Œä¸ä¾èµ– ID |
| å†·å¯åŠ¨ç¼ºå°‘å†å²åˆ†ç»„æ•°æ® | å·²å…³é—­çš„åˆ†ç»„æ— æ³•æœç´¢ | å¿…ç„¶ï¼ˆé¦–æ¬¡ï¼‰ | å®‰è£…æ—¶å…¨é‡æ‰«æ + ç”¨æˆ·æç¤º |
| åŒååŒè‰²åˆ†ç»„å†²çª | æ•°æ®è¦†ç›– | æä½ | ä»¥æœ€æ–°å¿«ç…§ä¸ºå‡† |
| 5 ä¸ª TAB æŒ‰é’®è¿‡å¤šå¯¼è‡´æ‹¥æŒ¤ | æ¨¡å¼é€‰æ‹©æ ç©ºé—´ä¸è¶³ | ä½ | è°ƒæ•´æŒ‰é’® paddingï¼Œæˆ–ä½¿ç”¨å›¾æ ‡+æ–‡å­—ç»„åˆ |

---

## å®æ–½è®¡åˆ’

### Phase 1: Background å¿«ç…§æœåŠ¡ï¼ˆé¢„è®¡ 0.5 å¤©ï¼‰

1. manifest.json æ–°å¢ `tabGroups` å’Œ `alarms` æƒé™
2. background.js æ–°å¢åˆ†ç»„äº‹ä»¶ç›‘å¬å’Œå¿«ç…§å­˜å‚¨é€»è¾‘
3. å®šæœŸå…¨é‡åŒæ­¥
4. éªŒè¯å¿«ç…§æ•°æ®æ­£ç¡®æ€§

### Phase 2: åˆ†ç»„æ¨¡å¼ UIï¼ˆé¢„è®¡ 1 å¤©ï¼‰

1. popup.html æ–°å¢ "åˆ†ç»„" TAB æŒ‰é’®
2. popup.js æ–°å¢ `loadGroups` å’Œ `displayGroupResults`
3. æ¨¡å¼åˆ‡æ¢é€»è¾‘ï¼ˆå« â†â†’ é”®ï¼‰
4. æ ‘çŠ¶åˆ†ç»„ UI + æŠ˜å /å±•å¼€
5. CSS æ ·å¼ï¼ˆé¢œè‰²ã€å¸ƒå±€ã€åŠ¨ç”»ï¼‰

### Phase 3: æœç´¢ä¸æ“ä½œï¼ˆé¢„è®¡ 0.5 å¤©ï¼‰

1. `searchGroups` ç©¿é€æœç´¢é€»è¾‘
2. æœç´¢æ—¶è‡ªåŠ¨å±•å¼€å‘½ä¸­åˆ†ç»„
3. ç‚¹å‡»æ ‡ç­¾é¡µï¼šæ¿€æ´»/æ–°å»º
4. ç»Ÿè®¡æ ä¿¡æ¯

### Phase 4: å¢å¼ºåŠŸèƒ½ï¼ˆé¢„è®¡ 0.5 å¤©ï¼‰

1. å³é”®èœå•
2. æ¢å¤æ•´ä¸ªåˆ†ç»„
3. æ·±è‰²æ¨¡å¼é€‚é…
4. è¾¹ç•Œæƒ…å†µå¤„ç†

---

## å‚è€ƒèµ„æ–™

- [chrome.tabGroups API](https://developer.chrome.com/docs/extensions/reference/api/tabGroups)
- [chrome.tabs API - groupId](https://developer.chrome.com/docs/extensions/reference/api/tabs#property-Tab-groupId)
- [Chromium Extensions Discussion - Saved Tab Groups](https://groups.google.com/a/chromium.org/g/chromium-extensions/c/2RO1vp-8lqE)
- [StackOverflow - List closed tab groups](https://stackoverflow.com/questions/79493740)
- [è°ƒç ”æŠ¥å‘Š - tab-groups-api-research.md](../research/tab-groups-api-research.md)

---

**æœ€åæ›´æ–°**: 2026-02-24
